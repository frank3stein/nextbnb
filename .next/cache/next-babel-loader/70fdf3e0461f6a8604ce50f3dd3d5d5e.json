{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n// import Houses from \"../houses.json\";\nimport fetch from \"isomorphic-unfetch\";\nimport Head from \"next/head\";\nimport Layout from \"../../components/Layout\";\nimport DateRangePicker from \"../../components/DateRangePicker\";\nimport calculateNights from \"../../utils/calculate-nights.js\";\nimport { useState } from \"react\";\nimport { useStoreActions } from \"easy-peasy\";\n\nconst House = ({\n  house\n}) => {\n  const setShowLoginModal = useStoreActions(actions => actions.modals.setShowLoginModal);\n  const {\n    0: dateChosen,\n    1: setDateChosen\n  } = useState(false);\n  const {\n    0: stayNights,\n    1: setStayNights\n  } = useState(0);\n\n  const content = __jsx(\"div\", {\n    className: \"jsx-2306727923\" + \" \" + \"container\"\n  }, __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-2306727923\"\n  }, house.title)), __jsx(\"article\", {\n    className: \"jsx-2306727923\"\n  }, __jsx(\"img\", {\n    src: house.picture,\n    width: \"100%\",\n    alt: \"House picture\",\n    className: \"jsx-2306727923\"\n  }), __jsx(\"p\", {\n    className: \"jsx-2306727923\"\n  }, house.type, \" - \", house.town), __jsx(\"p\", {\n    className: \"jsx-2306727923\"\n  }, house.title)), __jsx(\"aside\", {\n    className: \"jsx-2306727923\"\n  }, __jsx(\"h2\", {\n    className: \"jsx-2306727923\"\n  }, \"Add dates for prices.\"), __jsx(DateRangePicker, {\n    datesChanged: (startDate, endDate) => {\n      setDateChosen(true);\n      setStayNights(calculateNights(startDate, endDate));\n      console.log(startDate, endDate);\n    }\n  }), dateChosen && __jsx(\"div\", {\n    className: \"jsx-2306727923\"\n  }, __jsx(\"h2\", {\n    className: \"jsx-2306727923\"\n  }, \"Price per night\"), __jsx(\"p\", {\n    className: \"jsx-2306727923\"\n  }, \"$\", house.price), __jsx(\"h2\", {\n    className: \"jsx-2306727923\"\n  }, \"Total price for the booking\"), __jsx(\"p\", {\n    className: \"jsx-2306727923\"\n  }, \"$\", (stayNights * house.price).toFixed(2)), __jsx(\"button\", {\n    onClick: () => {\n      setShowLoginModal();\n    },\n    className: \"jsx-2306727923\" + \" \" + \"reserve\"\n  }, \"Reserve\"))), props.house.reviewsCount ? __jsx(\"div\", {\n    className: \"jsx-2306727923\" + \" \" + \"reviews\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-2306727923\"\n  }, props.house.reviewsCount, \" Reviews\"), props.house.reviews.map((review, index) => {\n    return __jsx(\"div\", {\n      key: index,\n      className: \"jsx-2306727923\"\n    }, __jsx(\"p\", {\n      className: \"jsx-2306727923\"\n    }, new Date(review.createdAt).toDateString()), __jsx(\"p\", {\n      className: \"jsx-2306727923\"\n    }, review.comment));\n  })) : __jsx(React.Fragment, null), __jsx(_JSXStyle, {\n    id: \"2306727923\"\n  }, \".container.jsx-2306727923{display:grid;grid-template-columns:60% 40%;grid-gap:30px;}aside.jsx-2306727923{border:1px solid #ccc;padding:20px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2VtaWwvZGV2ZWxvcG1lbnQvbmV4dGJuYi9wYWdlcy9Ib3VzZXMvW2lkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF3RWtCLEFBR3dCLEFBTVMsYUFMUSxTQU1qQixhQUNmLFFBTmdCLGNBQ2hCIiwiZmlsZSI6Ii9ob21lL2VtaWwvZGV2ZWxvcG1lbnQvbmV4dGJuYi9wYWdlcy9Ib3VzZXMvW2lkXS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCBIb3VzZXMgZnJvbSBcIi4uL2hvdXNlcy5qc29uXCI7XG5pbXBvcnQgZmV0Y2ggZnJvbSBcImlzb21vcnBoaWMtdW5mZXRjaFwiO1xuaW1wb3J0IEhlYWQgZnJvbSBcIm5leHQvaGVhZFwiO1xuaW1wb3J0IExheW91dCBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9MYXlvdXRcIjtcbmltcG9ydCBEYXRlUmFuZ2VQaWNrZXIgZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvRGF0ZVJhbmdlUGlja2VyXCI7XG5pbXBvcnQgY2FsY3VsYXRlTmlnaHRzIGZyb20gXCIuLi8uLi91dGlscy9jYWxjdWxhdGUtbmlnaHRzLmpzXCI7XG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlU3RvcmVBY3Rpb25zIH0gZnJvbSBcImVhc3ktcGVhc3lcIjtcblxuY29uc3QgSG91c2UgPSAoeyBob3VzZSB9KSA9PiB7XG4gIGNvbnN0IHNldFNob3dMb2dpbk1vZGFsID0gdXNlU3RvcmVBY3Rpb25zKFxuICAgIGFjdGlvbnMgPT4gYWN0aW9ucy5tb2RhbHMuc2V0U2hvd0xvZ2luTW9kYWxcbiAgKTtcbiAgY29uc3QgW2RhdGVDaG9zZW4sIHNldERhdGVDaG9zZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3RheU5pZ2h0cywgc2V0U3RheU5pZ2h0c10gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgY29udGVudCA9IChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxuICAgICAgPEhlYWQ+XG4gICAgICAgIDx0aXRsZT57aG91c2UudGl0bGV9PC90aXRsZT5cbiAgICAgIDwvSGVhZD5cbiAgICAgIDxhcnRpY2xlPlxuICAgICAgICA8aW1nIHNyYz17aG91c2UucGljdHVyZX0gd2lkdGg9XCIxMDAlXCIgYWx0PVwiSG91c2UgcGljdHVyZVwiIC8+XG4gICAgICAgIDxwPlxuICAgICAgICAgIHtob3VzZS50eXBlfSAtIHtob3VzZS50b3dufVxuICAgICAgICA8L3A+XG4gICAgICAgIDxwPntob3VzZS50aXRsZX08L3A+XG4gICAgICAgIHsvKiA8cD5cbiAgICAgICAgICB7aG91c2UucmF0aW5nfSAoe2hvdXNlLnJldmlld3NDb3VudH0pXG4gICAgICAgIDwvcD4gLy8gcmVtb3ZlZCovfVxuICAgICAgPC9hcnRpY2xlPlxuICAgICAgPGFzaWRlPlxuICAgICAgICA8aDI+QWRkIGRhdGVzIGZvciBwcmljZXMuPC9oMj5cbiAgICAgICAgPERhdGVSYW5nZVBpY2tlclxuICAgICAgICAgIGRhdGVzQ2hhbmdlZD17KHN0YXJ0RGF0ZSwgZW5kRGF0ZSkgPT4ge1xuICAgICAgICAgICAgc2V0RGF0ZUNob3Nlbih0cnVlKTtcbiAgICAgICAgICAgIHNldFN0YXlOaWdodHMoY2FsY3VsYXRlTmlnaHRzKHN0YXJ0RGF0ZSwgZW5kRGF0ZSkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgICB7ZGF0ZUNob3NlbiAmJiAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxoMj5QcmljZSBwZXIgbmlnaHQ8L2gyPlxuICAgICAgICAgICAgPHA+JHtob3VzZS5wcmljZX08L3A+XG4gICAgICAgICAgICA8aDI+VG90YWwgcHJpY2UgZm9yIHRoZSBib29raW5nPC9oMj5cbiAgICAgICAgICAgIDxwPiR7KHN0YXlOaWdodHMgKiBob3VzZS5wcmljZSkudG9GaXhlZCgyKX08L3A+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJlc2VydmVcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0U2hvd0xvZ2luTW9kYWwoKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgUmVzZXJ2ZVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2FzaWRlPlxuICAgICAge3Byb3BzLmhvdXNlLnJldmlld3NDb3VudCA/IChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZXZpZXdzXCI+XG4gICAgICAgICAgPGgzPntwcm9wcy5ob3VzZS5yZXZpZXdzQ291bnR9IFJldmlld3M8L2gzPlxuXG4gICAgICAgICAge3Byb3BzLmhvdXNlLnJldmlld3MubWFwKChyZXZpZXcsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2IGtleT17aW5kZXh9PlxuICAgICAgICAgICAgICAgIDxwPntuZXcgRGF0ZShyZXZpZXcuY3JlYXRlZEF0KS50b0RhdGVTdHJpbmcoKX08L3A+XG4gICAgICAgICAgICAgICAgPHA+e3Jldmlldy5jb21tZW50fTwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICkgOiAoXG4gICAgICAgIDw+PC8+XG4gICAgICApfVxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAuY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogNjAlIDQwJTtcbiAgICAgICAgICBncmlkLWdhcDogMzBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIGFzaWRlIHtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2Rpdj5cbiAgKTtcbiAgcmV0dXJuIDxMYXlvdXQgY29udGVudD17Y29udGVudH0+PC9MYXlvdXQ+O1xufTtcblxuLy8gSG91c2UuZ2V0SW5pdGlhbFByb3BzID0gKHsgcXVlcnkgfSkgPT4ge1xuLy8gICAvLyBvdXIgcXVlcnkgaXMgdGFrZW4gZnJvbSB0aGUgdXJsXG4vLyAgIGNvbnN0IHsgaWQgfSA9IHF1ZXJ5OyAvLyBob3VzZXMvcXVlcnlQYXJhbWV0ZXJzLiBJdCBpcyBpbiB0aGUgZmlsZSBuYW1lIFtpZF0uanNcbi8vICAgY29uc29sZS5sb2cocXVlcnkpO1xuLy8gICByZXR1cm4ge1xuLy8gICAgIGhvdXNlOiBIb3VzZXMuZmlsdGVyKGhvdXNlID0+IGhvdXNlLmlkID09PSBpZClbMF1cbi8vICAgfTtcbi8vIH07XG5cbkhvdXNlLmdldEluaXRpYWxQcm9wcyA9IGFzeW5jICh7IHF1ZXJ5IH0pID0+IHtcbiAgY29uc3QgeyBpZCB9ID0gcXVlcnk7XG5cbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvaG91c2VzLyR7aWR9YCk7XG4gIGNvbnN0IGhvdXNlID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICByZXR1cm4ge1xuICAgIGhvdXNlXG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBIb3VzZTtcbiJdfQ== */\\n/*@ sourceURL=/home/emil/development/nextbnb/pages/Houses/[id].js */\"));\n\n  return __jsx(Layout, {\n    content: content\n  });\n}; // House.getInitialProps = ({ query }) => {\n//   // our query is taken from the url\n//   const { id } = query; // houses/queryParameters. It is in the file name [id].js\n//   console.log(query);\n//   return {\n//     house: Houses.filter(house => house.id === id)[0]\n//   };\n// };\n\n\nHouse.getInitialProps = async ({\n  query\n}) => {\n  const {\n    id\n  } = query;\n  const res = await fetch(`http://localhost:3000/api/houses/${id}`);\n  const house = await res.json();\n  return {\n    house\n  };\n};\n\nexport default House;","map":{"version":3,"sources":["/home/emil/development/nextbnb/pages/Houses/[id].js"],"names":["fetch","Head","Layout","DateRangePicker","calculateNights","useState","useStoreActions","House","house","setShowLoginModal","actions","modals","dateChosen","setDateChosen","stayNights","setStayNights","content","title","picture","type","town","startDate","endDate","console","log","price","toFixed","props","reviewsCount","reviews","map","review","index","Date","createdAt","toDateString","comment","getInitialProps","query","id","res","json"],"mappings":"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","sourcesContent":["// import Houses from \"../houses.json\";\nimport fetch from \"isomorphic-unfetch\";\nimport Head from \"next/head\";\nimport Layout from \"../../components/Layout\";\nimport DateRangePicker from \"../../components/DateRangePicker\";\nimport calculateNights from \"../../utils/calculate-nights.js\";\nimport { useState } from \"react\";\nimport { useStoreActions } from \"easy-peasy\";\n\nconst House = ({ house }) => {\n  const setShowLoginModal = useStoreActions(\n    actions => actions.modals.setShowLoginModal\n  );\n  const [dateChosen, setDateChosen] = useState(false);\n  const [stayNights, setStayNights] = useState(0);\n  const content = (\n    <div className=\"container\">\n      <Head>\n        <title>{house.title}</title>\n      </Head>\n      <article>\n        <img src={house.picture} width=\"100%\" alt=\"House picture\" />\n        <p>\n          {house.type} - {house.town}\n        </p>\n        <p>{house.title}</p>\n        {/* <p>\n          {house.rating} ({house.reviewsCount})\n        </p> // removed*/}\n      </article>\n      <aside>\n        <h2>Add dates for prices.</h2>\n        <DateRangePicker\n          datesChanged={(startDate, endDate) => {\n            setDateChosen(true);\n            setStayNights(calculateNights(startDate, endDate));\n            console.log(startDate, endDate);\n          }}\n        />\n        {dateChosen && (\n          <div>\n            <h2>Price per night</h2>\n            <p>${house.price}</p>\n            <h2>Total price for the booking</h2>\n            <p>${(stayNights * house.price).toFixed(2)}</p>\n            <button\n              className=\"reserve\"\n              onClick={() => {\n                setShowLoginModal();\n              }}\n            >\n              Reserve\n            </button>\n          </div>\n        )}\n      </aside>\n      {props.house.reviewsCount ? (\n        <div className=\"reviews\">\n          <h3>{props.house.reviewsCount} Reviews</h3>\n\n          {props.house.reviews.map((review, index) => {\n            return (\n              <div key={index}>\n                <p>{new Date(review.createdAt).toDateString()}</p>\n                <p>{review.comment}</p>\n              </div>\n            );\n          })}\n        </div>\n      ) : (\n        <></>\n      )}\n      <style jsx>{`\n        .container {\n          display: grid;\n          grid-template-columns: 60% 40%;\n          grid-gap: 30px;\n        }\n\n        aside {\n          border: 1px solid #ccc;\n          padding: 20px;\n        }\n      `}</style>\n    </div>\n  );\n  return <Layout content={content}></Layout>;\n};\n\n// House.getInitialProps = ({ query }) => {\n//   // our query is taken from the url\n//   const { id } = query; // houses/queryParameters. It is in the file name [id].js\n//   console.log(query);\n//   return {\n//     house: Houses.filter(house => house.id === id)[0]\n//   };\n// };\n\nHouse.getInitialProps = async ({ query }) => {\n  const { id } = query;\n\n  const res = await fetch(`http://localhost:3000/api/houses/${id}`);\n  const house = await res.json();\n\n  return {\n    house\n  };\n};\n\nexport default House;\n"]},"metadata":{},"sourceType":"module"}